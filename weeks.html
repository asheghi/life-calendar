<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Life in Weeks</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
<div class="container">
    <div class="header">
        my life in weeks
    </div>
    <div class="plot">
    </div>
    <div class="footer">
        hope you make it to the end!
    </div>
    <script>
        window.onload = function () {
            const plot = document.querySelector('.plot');

            function draw(age_in_weeks) {
                let week_counter = 0;
                for (let year = 1; year < 72; year++) {
                    const row = document.createElement('div');
                    row.className = 'row';


                    for (let tenth_number = 1; tenth_number < 14; tenth_number++) {
                        const tenth = document.createElement('div');
                        tenth.className = 'tenth';

                        for (let week_number = 1; week_number < 5; week_number++) {
                            week_counter++;
                            const week = document.createElement('span');
                            week.className = week_counter > age_in_weeks ? 'week' : 'week passed';
                            tenth.appendChild(week);

                            if (year === 1 && week_counter % 4 === 0) {
                                const w = document.createElement('div');
                                w.className = 'w';
                                w.innerHTML = week_counter.toLocaleString('en-US', {
                                    minimumIntegerDigits: 2,
                                    useGrouping: false
                                })

                                week.appendChild(w);
                            }
                        }

                        row.appendChild(tenth)
                    }

                    plot.appendChild(row);

                    const y = document.createElement('div');
                    y.className = 'year';
                    y.innerHTML = (year - 1).toLocaleString('en-US', {
                        minimumIntegerDigits: 2,
                        useGrouping: false
                    })

                    row.appendChild(y)
                }
            }

            const age_in_weeks = getAgeInWeeks();
            draw(age_in_weeks);
        }

        function getAgeInWeeks() {
            const urlSearchParams = new URLSearchParams(window.location.search);
            const params = Object.fromEntries(urlSearchParams.entries());
            return isNaN(params.weeks) ? 0 : params.weeks;
        }
    </script>
</div>
</body>
</html>